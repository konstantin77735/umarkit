class Popup{constructor(e){const{targetSelector:t,overlaySelector:i,windowSelector:s,closeBtnSelector:o,displayPopup:p,popupHeight:n,popupWidth:r,disappearingTime:a,disappearingType:l,slidingTime:h,slidingType:c,slidingDir:u,autocloseTime:d,closeOnMiss:y,closeOnKeys:g,inputNameValue:m,inputPhoneValue:T,inputTextArea:f,regV:S}=e;this.targetSelector=t,this.overlaySelector=i,this.windowSelector=s,this.closeBtnSelector=o,this.displayPopup=p,this.popupHeight=n,this.popupWidth=r,this.disappearingTime=a,this.disappearingType=l||"ease",this.slidingTime=h,this.slidingType=c||"ease",this.slidingDir=u||"left",this.autocloseTime=d,this.closeOnMiss=y,this.closeOnKeys=g,this.popupTrigger=document.querySelector(`${this.targetSelector}`),this.popupOverlay=document.querySelector(`${this.overlaySelector}`),this.popupWindow=document.querySelector(`${this.windowSelector}`),this.closeBtn=document.querySelector(`${this.closeBtnSelector}`),this.inputNameValue=e.inputNameValue,this.inputPhoneValue=e.inputPhoneValue,this.inputTextArea=e.inputTextArea,this.regV=e.regV,this.init()}init(){if(this.disappearance(),this.closeOnMiss&&(this.popupOverlay.addEventListener("click",e=>{e.target.classList.contains(`${this.overlaySelector.slice(1)}`)&&this.disappearance()}),this.popupOverlay.addEventListener("touchstart",e=>{e.target.classList.contains(`${this.overlaySelector.slice(1)}`)&&this.disappearance()})),this.closeOnKeys){const e=this.closeOnKeys.replace(/\s+/g,"").split(",");document.addEventListener("keydown",t=>{e.forEach(e=>{parseInt(e,10)===t.keyCode&&this.disappearance()})})}}appearance(e){if(this.slidingType)switch(this.popupWindow.style.transition=`all ${this.slidingTime/1e3}s ${this.slidingType}, height 0s ${this.slidingType} 0s`,this.slidingTime&&this.slidingType&&this.slidingDir){case"left":this.popupWindow.style.left="0px";break;case"right":this.popupWindow.style.right="0px";break;case"top":this.popupWindow.style.top="0px";break;case"bottom":this.popupWindow.style.bottom="0px"}this.popupOverlay.style.height=this.popupHeight,this.popupOverlay.style.width=this.popupWidth,this.popupOverlay.style.opacity=1,this.popupOverlay.style.transition=`opacity ${this.disappearingTime/1e3}s ${this.disappearingType}, height 0s ${this.disappearingType} 0s`;let t=this.popupWindow.querySelector(".popup__header");console.log(t),t.textContent=e,this.autocloseTime&&setTimeout(()=>{this.disappearance()},this.autocloseTime)}disappearance(){if(this.slidingTime&&this.slidingType&&this.slidingDir)switch(this.popupWindow.style.transition=`all ${this.slidingTime/1e3}s ${this.slidingType}, height 0s ${this.slidingType} ${this.slidingTime/1e3}s`,this.slidingDir){case"left":this.popupWindow.style.left="-100%";break;case"right":this.popupWindow.style.right="-100%";break;case"top":this.popupWindow.style.top="-100%";break;case"bottom":this.popupWindow.style.bottom="-100%"}this.popupOverlay.style.height=0,this.popupOverlay.style.opacity=0,this.popupOverlay.style.transition=`opacity ${this.disappearingTime/1e3}s ${this.disappearingType}, height 0s ${this.disappearingType} ${this.disappearingTime/1e3}s`}}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".footer-form .form");console.log(e);const t=/^\+?[78][-\(]?\d{3}\)?-?\d{3}-?\d{2}-?\d{2}$/;let i=new Popup({targetSelector:".footer-form__btn-text-wrapper",overlaySelector:".popup",windowSelector:".popup__window",displayPopup:"flex",popupHeight:"15vh",popupWidth:"100%",disappearingTime:600,disappearingType:"linear",slidingTime:500,slidingType:"linear",slidingDir:"top",autocloseTime:2e3});e.addEventListener("submit",e=>{e.preventDefault();const s=document.querySelector(".footer-form__input_name").value.trim(),o=document.querySelector(".footer-form__input_phone").value.trim(),p=document.querySelector(".footer-form__input_textarea").value.trim();console.log(s);const n={name:s,tel:o,description:p,toString(){return`name=${this.name}&tel=${this.tel}&description=${this.description}`}}.toString();if(""!=s&&""!=o&&""!=p&&t.test(o)){console.log(`inputPhoneValue: ${o}`);const t="/amoapi_landing/script.php";return i.appearance("Ваши данные успешно отправлены!"),function(e,t,i=null){return new Promise((s,o)=>{const p=new XMLHttpRequest;p.open(e,t),p.responseType="json",p.setRequestHeader("Content-Type","application/json"),p.onerror=(()=>{console.log(p.response)}),p.onload=(()=>{p.status>=400?o(p.response):s(p.response)}),p.send(i)})}("POST",t,n).then(e=>console.log(e)).catch(e=>console.log(e)),document.querySelector(".footer-form__input_name").value="",document.querySelector(".footer-form__input_phone").value="",document.querySelector(".footer-form__input_textarea").value="",e.preventDefault(),!1}return i.appearance("Заполните все поля!"),e.preventDefault(),!1})});